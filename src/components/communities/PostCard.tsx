import type { Post } from "@/types/Post.types";

interface PostCardProps {
  post: Post;
  showCategory?: boolean;
  showStates?: boolean;
  onClick?: (post: Post) => void;
}

const PostCard = ({ post, showCategory = true, showStates = true, onClick }: PostCardProps) => {
  const { category, title, content, imageCount, likeCount, commentCount, createdAt } = post;
  const hasImage = imageCount > 0;

  return (
    <section
      className="flex flex-col my-2 py-2 border-b border-gray-100 gap-2.5 overflow-auto"
      onClick={() => onClick?.(post)}
    >
      {showCategory && (
        <div className="flex items-center bg-[#E1F2B7] rounded-sm px-2.5 w-fit h-6 text-[11px] text-gray-600">
          {category}
        </div>
      )}
      <div className="flex justify-between gap-1.5">
        <article className="flex flex-col gap-1.5">
          <div className="text-gray-900 typo-body_bold14 line-clamp-1">{title}</div>
          <div className="typo-body_reg12 text-gray-500 line-clamp-2 whitespace-pre-line">
            {content}
          </div>
        </article>
        {hasImage && (
          <div className="relative w-16 h-16 bg-gray-400 rounded-lg shrink-0">
            <p className="absolute text-center w-4 h-4 bg-[#F4F4F4] rounded-tl-lg text-[10px] right-0 bottom-0">
              {imageCount}
            </p>
          </div>
          /// 나중에 이미지 삽입
        )}
      </div>
      {showStates && (
        <div className="flex text-[11px] justify-between">
          <div className="flex gap-2.5 text-gray-900">
            <div className="flex gap-1">
              <svg width="16" height="16" viewBox="-1 -2 16 16" fill="#D4EA80">
                <path d="M0.658712 6.29563C0.650839 6.20496 0.6619 6.11364 0.691193 6.02746C0.720486 5.94129 0.767371 5.86215 0.828874 5.79506C0.890377 5.72796 0.965155 5.67439 1.04846 5.63773C1.13177 5.60107 1.22179 5.58213 1.3128 5.58211H2.5668C2.74097 5.58211 2.90801 5.6513 3.03117 5.77446C3.15433 5.89762 3.22352 6.06465 3.22352 6.23883V12.4776C3.22352 12.6518 3.15433 12.8188 3.03117 12.942C2.90801 13.0652 2.74097 13.1343 2.5668 13.1343H1.85558C1.69121 13.1344 1.5328 13.0728 1.41164 12.9617C1.29048 12.8507 1.21538 12.6982 1.20116 12.5344L0.658712 6.29563ZM5.19367 6.0336C5.19367 5.75909 5.36441 5.51348 5.61232 5.39659C6.15379 5.14112 7.07614 4.6279 7.49217 3.93408C8.02838 3.03963 8.12952 1.42378 8.14594 1.05372C8.14823 1.00184 8.14692 0.94996 8.15382 0.898736C8.2428 0.257453 9.48038 1.00644 9.95486 1.79844C10.2126 2.22793 10.2455 2.79238 10.2185 3.23336C10.1893 3.70489 10.0511 4.16032 9.91546 4.6128L9.6265 5.57718H13.1915C13.293 5.57718 13.393 5.60068 13.4839 5.64585C13.5747 5.69103 13.6539 5.75664 13.7151 5.83754C13.7764 5.91844 13.818 6.01243 13.8369 6.11213C13.8557 6.21184 13.8511 6.31455 13.8236 6.4122L12.0603 12.6563C12.0214 12.794 11.9385 12.9152 11.8244 13.0015C11.7102 13.0878 11.571 13.1344 11.4279 13.1343H5.85038C5.67621 13.1343 5.50917 13.0652 5.38601 12.942C5.26286 12.8188 5.19367 12.6518 5.19367 12.4776V6.0336Z" />
              </svg>
              <p>{likeCount}</p>
            </div>
            <div className="flex gap-1">
              <svg width="16" height="16" viewBox="-1 -2 16 16" fill="#D4EA80">
                <path d="M0 4.90348C0 3.18726 9.13345e-08 2.32915 0.33405 1.67331C0.627866 1.09668 1.09668 0.627866 1.67331 0.33405C2.32915 -9.13345e-08 3.18726 0 4.90348 0H8.88756C10.6038 0 11.4619 -9.13345e-08 12.1177 0.33405C12.6944 0.627866 13.1632 1.09668 13.457 1.67331C13.791 2.32915 13.791 3.18726 13.791 4.90348V5.82289C13.791 7.5391 13.791 8.39721 13.457 9.05305C13.1632 9.62968 12.6944 10.0985 12.1177 10.3923C11.4619 10.7264 10.6038 10.7264 8.88756 10.7264H3.38187C3.17869 10.7264 2.98384 10.8072 2.84019 10.9509L1.30785 12.4832C0.825164 12.9659 0 12.6242 0 11.9415V4.90348ZM4.59702 3.06468C4.39381 3.06468 4.19894 3.1454 4.05525 3.28908C3.91157 3.43277 3.83085 3.62765 3.83085 3.83085C3.83085 4.03405 3.91157 4.22892 4.05525 4.37261C4.19894 4.51629 4.39381 4.59701 4.59702 4.59701H9.19403C9.39723 4.59701 9.59211 4.51629 9.73579 4.37261C9.87948 4.22892 9.9602 4.03405 9.9602 3.83085C9.9602 3.62765 9.87948 3.43277 9.73579 3.28908C9.59211 3.1454 9.39723 3.06468 9.19403 3.06468H4.59702ZM4.59702 6.12935C4.39381 6.12935 4.19894 6.21007 4.05525 6.35376C3.91157 6.49744 3.83085 6.69232 3.83085 6.89552C3.83085 7.09872 3.91157 7.2936 4.05525 7.43729C4.19894 7.58097 4.39381 7.66169 4.59702 7.66169H6.89552C7.09872 7.66169 7.2936 7.58097 7.43729 7.43729C7.58097 7.2936 7.66169 7.09872 7.66169 6.89552C7.66169 6.69232 7.58097 6.49744 7.43729 6.35376C7.2936 6.21007 7.09872 6.12935 6.89552 6.12935H4.59702Z" />
              </svg>
              <p>{commentCount}</p>
            </div>
          </div>
          <div className="text-[#9C9C9C]">{createdAt}</div>
        </div>
      )}
    </section>
  );
};

export default PostCard;
